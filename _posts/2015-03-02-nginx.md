---
layout: post
title:  "Nginx"
date:   2015-03-02 20:38:32
categories: devops
description: Philosophy of nginx web server, configuration, commands and operation
---
> Apache is like Microsoft Word, it has a million options but you only need six. Nginx does those six things, and it does five of them 50 times faster than Apache.
> - Chris Lea

* __Primer__
  * Nginx primarily deals with static files
  * Hands off other requests to another process
  * It does not have to know about Ruby or Python to handle a web request
  * It dispatches dynamic requests to another process (usually unicorn) and returns the results

* __Nginx Commands__
  * `service nginx status`
  * `sudo service nginx start`
  * `sudo service nginx stop`
  * `sudo nginx -t` - Testing nginx configuration

* __How it works__
  * Master & Worker Processes
  * Master - read, evaluate and maintain worker processes
  * workers - actual processing of requests

* __Configuration__
  * `/etc/nginx/nginx.conf` - Top level config file. Includes other files listed below
  * `/etc/nginx/conf.d` folder
  * `/etc/nginx/sites-available`
  * `/etc/nginx/sites-enabled`

* __Upstream__
  * Defines server groups
  * When it contains more than 1 server - indicates load balancing

* __Resources__
  * [Excellent Article](https://serversforhackers.com/getting-started-with-nginx)

* __Server Block__
  * Main Directives: `listen` & `server_name`

* __listen__
  * Listens to ip address & port combinations
  * Unix sockets

* __Location Block__
  * Location block lives within a server block
  ```
  location optional_modifier location_match {

  }
  ```

* __location match__
  * none - prefix match
  * `=` - exact match
  * `~` - case-sensitive regular expression match
  * `~*` - case-insensitive regular expression match
  * `^~`-  best non regular expression match ( prefix or exact)